# Евалуатор

Це рутина або пара рутин, які дозволяють довільним чином перетворити елементи масиву перед їх порівнянням. Якщо отримані значення співпадають евалуатор повертає <code>true</code>, інакше - <code>false</code>. Евалуатор, в якості колбека, передається в рутини для роботи із [Long](./Long.md) типами.

Евалуатор приймає один аргумент, на відмінну від [еквалайзера](./Equalizer.md).

Якщо евалуатор складається із однієї рутини, то вона застосовується як до елементів контейнера переданого в першому аргументі, так і до елементів контейнера переданого в другому аргументі.

### Приклад евалуатора з однією рутиною

```js
var dst = [ { val : 3 }, { val : 0 }, { val : 5 } ];
var result = _.arrayRemoveElement( dst, { val : 0 }, ( e ) => e.val );
console.log( result );
/* log : [ { val : 3 }, { val : 5 } ] */
```

Рутина `arrayRemoveElement` містить в аргументах:
- масив мап `dst = [ { val : 3 }, { val : 0 }, { val : 5 } ]`;
- елемент порівняння `{ val : 0 }`;
- евалуатор `( e ) => e.val`.

Для того щоб видалити із контейнера `dst` елемент `{ val : 0 }` не можна просто використати порівняння `===`. Необхідно спершу перетворити елементи в їх еквівалентні форми.
Рутина `arrayRemoveElement` ітерує по елементах масиву, на кожному кроці застосовуючи до елемента контейнера та до елемента порівняння евалуатор. І тільки після цього порівнює повернені значення з допомогою оператора `===`.

В даному прикладі, другий елемент контейнера `dst` буде видалено.

Другий аргумент може бути і скаляром, як у прикладі нижче.

```js
var dst = [ { val : 3 }, { val : 0 }, { val : 5 } ];
var result = _.arrayRemoveElement( dst, 0, ( e ) => e.val );
console.log( result );
/* log : [ { val : 3 }, { val : 0 }, { val : 5 } ] */
```
Евалуатор не виявив жодного співпадіння, адже другий агрумент `0` після застосування евалуатора матиме значення `undefined`. Жоден елемент в контейнері `dst` після застосування евалуатора не перетвориться в таке значення. Ця проблема вирішується у прикладі нижче.

Якщо евалуатор складається з двох рутин, то перша застосовується до елементів контейнера переданого в першому аргументі, а друга застосовується до елементів контейнера переданого в другому аргументі.

### Приклад евалуатора з двома рутинами

Можемо задати два евалуатора, окремо для першого та для другого аргумента.

```js
var dst = [ { val : 3 }, { val : 0 }, { val : 5 } ];
var evalutor1 = ( e ) => e.val;
var evalutor2 = ( e ) => e;
var result = _.arrayRemoveElement( dst, 0, evalutor1, evalutor2 );
console.log( result );
/* log : [ { val : 3 }, { val : 5 } ] */
```
Після виконання програми в контейнері `dst` не залишиться елемента `{ val : 0 }` попри те, що другий аргумент `0`.

Евалуатор `evalutor1` застосовується лише до елементів контейнера `dst`, а евалуатор `evaluator2` застосовується лише до другого аргумента, який є скаляром `0`.

[Повернутись до змісту](../README.md#Концепції)

