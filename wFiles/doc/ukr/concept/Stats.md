# Стати файла

Це набір атрибутів (характеристик) файла, що дозволяє файловій системі та іншим API ідентифікувати файл і виконувати операції над ним.  

В залежності від файлової системи набір атрибутів може змінюватись. `NodeJS` має інструменти для роботи з файловою системою, що представлений модулем `fs`. Модуль `fs` може зчити стати файла з допомогою методів `stat()`, `lstat()`, `fstat()` та їх синхронних реалізацій. В зв'язку з тим, що деякі з атрибутів можуть мати значення більше від максимального числа типу `number`, для отримання коректних значень доцільно використовувати числа типу `bigint` (`NodeJS >= 10.5`). Для цього в опціях методів вмикається вивід значення цього типу.

Об'єкт `stats`, що повертається модулем містить наступні атрибути:

- `dev`- цифровий ідентифікатор пристрою, на якому знаходиться файл.
- `mode` - бітова маска, що описує тип файла і режим доступу.
- `nlink`- кількість хардлінків прив'язаних до файла.
- `uid` - ідентифікатор юзера, що володіє файлом (для `posix`-систем).
- `gid` - ідентифікатор групи, що володіє файлом (для `posix`-систем).
- `rdev` - цифровий ідентифікатор файла, якщо файл позначено як 'спеціальний'.
- `blksize` - розмір блоку даних в байтах, що використовується в I/O операціях.
- `ino`- номер запису `Inode` в файловій системі.
- `size` - розмір файла в байтах.
- `blocks` - кількість блоків зайнятої пам'яті.
- `atimeMs` - кількість мілісекунд від дати початку відліку часу в `posix`-системах (1 січня 1970р.) до дати останнього доступу до файла.
- `mtimeMs` - кількість мілісекунд від 1 січня 1970р. до дати останньої модифікації файла.
- `ctimeMs` - кількість мілісекунд від 1 січня 1970р. до дати останньої зміни статусу файла (останньої зміни даних `Inode`).
- `birthtimeMs` - кількість мілісекунд від 1 січня 1970р. до дати створення файла.
- `atime` - дата останнього доступу до файла.
- `mtime` - дата останньої модифікації файла.
- `ctime` - дата останньої зміни статусу файла.
- `birthtime` - дата створення файла.

### Часові мітки об'єкту `stats`

Крім загальноприйнятих атрибутів для пошуку і вибору файлів як назва файла і його розмір, важливими даними є часові мітки файла. Указані вище мітки виводять об'єкт типу `Дата` та відображають час відповідних змін.

Число, що указане в мітках `atimeMs`, `mtimeMs`, `ctimeMs` позначає кількість мілісекунд від дати початку відліку часу в операційних системах до часу зміни атрибуту. Це число може варіюватись в різних операційних системах. Указана дата 1 січня 1970 року, справедлива для `posix`-систем.

Часові мітки змінюються по наступним причинам:

- `atime "Access Time"` - Дата останнього доступу до файла. Змінюється системними викликами `utimes` і `read`, тобто, в першу чергу, при будь-якій операції читання даних.
- `mtime "Modified Time"` - Дата останньої модифікації. Змінюється системними викликами `utimes` i `write`, тобто, при перезапису даних файла. Важливо відмітити, що разом зі зміною дати в `mtime`, одночасно змінюється дата в `ctime`.
- `ctime "Change Time"` - Дата останньої зміни статусу файла (дата зміни даних `Inode`). Змінюється системними викликами `chmod`, `chown`, `link`, `rename`, `unlink`, `utimes`, `write`. Приведені системні виклики за виключенням двох останніх - `utimes`, `write`, змінюють лише значення мітки `ctime`.
`birthtime "Birth Time"` - Дата створення файла. Встановлюється при створенні файла і не змінюється. В системах де не використовується цей атрибут, може мати значення 1 січня 1970р., що може бути пізнішим, ніж інші мітки. В операційних системах `Windows` `ctime` зберігає значення `birthtime`.

### Додаткові властивості об'єкту `stats`

З об'єкту `stats` можна отримати інформацію про тип файла:

- `isFile()` - повертає `true`, якщо об'єкт `stats` описує звичайний файл.
- `isDirectory()` - повертає `true`, якщо файл є директорією файлової системи.
- `isBlockDevice()` - повертає `true`, якщо пристрій описано як блочний (для `posix`-систем підключені пристрої вважаються файлами).
- `isCharacterDevice()` - повертає `true`, якщо пристрій описано як символьний.
- `isFIFO()` - повертає `true`, якщо описаний об'єкт `stats` має тип черги `first-in-first-out` (`FIFO`), іменований канал.
- `isSocket()` - повертає `true`, якщо описаний об'єкт є сокетом.
- `isSymbolicLink()` - повертає `true`, якщо об'єкт `stats` описує символьне посилання. Цю властивість можна отримати лише при використанні методу `lstat()`.

[Повернутись до змісту](../README.md#Концепції)
